{"version":3,"sources":["client.umd.js","proxy.es6.js","helpers.es6.js","configuration.es6.js","client.es6.js"],"names":["global","factory","define","amd","exports","mod","ES6RestClient","this","_classCallCheck","instance","Constructor","TypeError","objectToQueryString","obj","Object","keys","filter","key","map","value","encodeURIComponent","join","prefixedTimestamp","PREFIX","TIMESTAMP","Date","getTime","appendQueryStringToURL","url","queryString","mark","indexOf","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","protoProps","staticProps","prototype","defaultSettings","userDefinedSettings","properties","querystring","fetchConfiguration","QUERYSTRING_PARAMETERS","Symbol","BODY_PAYLOAD","method","baseURI","params","jsonp","callback","_httpMethod","type","httpVerb","assign","body","Configuration","settings","payload","get","configuration","route","jsonPCallback","reset","_jsonpFetch","callbackParamName","callbackFunctionName","scriptId","scriptElement","scriptSource","Promise","resolve","reject","document","createElement","src","id","addEventListener","window","data","Reflect","deleteProperty","parentNode","removeChild","getElementsByTagName","documentElement","appendChild","RestClient","_fetch","fetch","_x","_x2","_x3","apply","arguments","toString","initObj","_trapMethod","thisArg","argumentsList","DEFAULT_HTTP_VERB","propertiesLength","currentProperty","isMethodName","isHTTPVerb","hasDefaultHTTPVerb","pop","computed","restClientProxy","_trapProperty","propKey","receiver","push","Proxy"],"mappings":"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","file":"client.umd.js","sourcesContent":[null,"import Configuration from './configuration.es6.js';\r\nimport RestClient from './client.es6.js';\r\n\r\n/************************************/\r\n/* default assignments              */\r\n/************************************/\r\n\r\nconst configuration = new Configuration();\r\n\r\n/************************************/\r\n/* helper functions                 */\r\n/************************************/\r\n\r\n/**\r\n * Processes any method invokation on the proxied RestClient class by\r\n * checking whether the former exists in the definition of the latter: if positive,\r\n * configures the client with any provided arguments and forwards the call\r\n * to the original method implementation; if negative, stores the non-existing\r\n * method name as route fragment in the configuration and performs a default\r\n * get() method call on the target RestClient class interface.\r\n *\r\n * @param {RestClient} target The RestClient class to which the Proxy has been applied\r\n * @param {Object} thisArg The 'this' argument for the call\r\n * @param {Array} argumentsList Array of arguments passed to the trapped method call\r\n * @return {RestClient|Promise<Response>|Promise<any>} \r\n */\r\n\r\nconst _trapMethod = function _trapMethod(target, thisArg, argumentsList){\r\n    \r\n    const DEFAULT_HTTP_VERB = 'get';\r\n    \r\n    let properties,\r\n        propertiesLength,\r\n        currentProperty,\r\n        isMethodName,\r\n        isHTTPVerb,\r\n        hasDefaultHTTPVerb;\r\n\r\n    properties = configuration.properties;\r\n    propertiesLength = properties.length;\r\n    currentProperty = properties[propertiesLength-1];\r\n    isMethodName = (typeof configuration[currentProperty] === 'function');\r\n    isHTTPVerb = isMethodName && Reflect.apply(configuration[properties.pop()],\r\n                                               configuration,\r\n                                               argumentsList);\r\n    hasDefaultHTTPVerb = !isMethodName &&\r\n                         !isHTTPVerb &&\r\n                          Reflect.apply(configuration[DEFAULT_HTTP_VERB],\r\n                                        configuration,\r\n                                        argumentsList);\r\n        \r\n    return (isHTTPVerb || hasDefaultHTTPVerb) ?\r\n        Reflect.apply(target.fetch, target, configuration.computed) :\r\n            restClientProxy;\r\n                    \r\n};\r\n\r\n/**\r\n * Processes any getter invokation on the proxied RestClient class\r\n * by storing properties keys as route fragments in the configuration object\r\n *  \r\n * @param {RestClient} target The RestClient class to which the Proxy has been applied\r\n * @param {String} propKey The trapped property key\r\n * @param {Proxy} receiver The Proxy object applied to the RestClient class\r\n * @return {RestClient} \r\n */\r\n\r\nconst _trapProperty = function _trapProperty(target, propKey, receiver){\r\n\r\n    configuration.properties.push(propKey);\r\n\r\n    return receiver;\r\n\r\n}\r\n\r\n/************************************/\r\n/* library entry point              */\r\n/************************************/\r\n\r\n/**\r\n * Wraps the RestClient static class with a Proxy object\r\n * in order to trap and subsequently process any properties\r\n * and methods invoked on the former\r\n */\r\n\r\nconst restClientProxy = new Proxy(RestClient,\r\n{\r\n\r\n    get(target, propKey, receiver) {\r\n\r\n        return _trapProperty(target, propKey, receiver);\r\n\r\n    },\r\n\r\n    apply(target, thisArg, argumentsList) {\r\n\r\n        return _trapMethod(target, thisArg, argumentsList);\r\n\r\n    }\r\n\r\n});\r\n\r\nexport default restClientProxy;\r\n","/**\r\n * Given an object, serializes its own key/value pairs into\r\n * querystring; values can be either primitive types or\r\n * function expressions\r\n *\r\n * @param {Object} obj Object to be serialized into querystring\r\n * @return {String}\r\n */\r\n\r\nexport function objectToQueryString(obj){\r\n\r\n    return Object.keys(obj || {})\r\n                 .filter((key) => { return ((obj[key] !== '') &&\r\n                                            (obj[key] !== null)); })\r\n                 .map((key) => {\r\n                    \r\n                     const value = (typeof obj[key] === 'function') ?\r\n                                      encodeURIComponent(obj[key]()) :\r\n                                         encodeURIComponent(obj[key]);\r\n                    \r\n                     return `${key}=${value}`;\r\n\r\n                 })\r\n                 .join('&');\r\n\r\n}\r\n\r\n/**\r\n * Returns a string identifier composed by a prefix\r\n * followed by current timestamp\r\n *\r\n * @return {String}\r\n */\r\n \r\nexport function prefixedTimestamp(){\r\n    \r\n    const PREFIX = '__es6-rest-client__';\r\n    const TIMESTAMP = (new Date()).getTime();\r\n    \r\n    return `${PREFIX}${TIMESTAMP}`;\r\n    \r\n}\r\n\r\n/**\r\n * Allows to concatenate an existing URL with a querystring fragment\r\n *\r\n * @param {String} url URL to be concatenated with the given querystring\r\n * @return {String} queryString Querystring fragment to be appended\r\n *                              to the specified URL\r\n * @return {String}\r\n */\r\n\r\nexport function appendQueryStringToURL(url, queryString){\r\n    \r\n    const mark = (queryString) ? (((url || '').indexOf('?') === -1) ? '?' : '&') : '';\r\n    \r\n    return `${url}${mark}${queryString}`;\r\n    \r\n}\r\n\r\n","import { objectToQueryString,\r\n         appendQueryStringToURL,\r\n         prefixedTimestamp } from './helpers.es6.js';\r\n\r\nlet defaultSettings,\r\n    userDefinedSettings,\r\n    properties,\r\n    querystring,\r\n    fetchConfiguration;\r\n    \r\n/************************************/\r\n/* default assignments              */\r\n/************************************/\r\n\r\nconst QUERYSTRING_PARAMETERS = Symbol();\r\nconst BODY_PAYLOAD = Symbol();\r\n\r\n/**\r\n * Stores client default configuration settings\r\n *\r\n * @type Object\r\n */\r\n\r\ndefaultSettings = {\r\n    \r\n    method: 'get', \r\n    baseURI: '/',\r\n    params: {},\r\n    jsonp: { callback: prefixedTimestamp }\r\n\r\n};\r\n\r\n/**\r\n * Stores user defined client configuration settings\r\n *\r\n * @type Object\r\n */\r\n\r\nuserDefinedSettings = {};\r\n\r\n/**\r\n * Stores properties and methods names invoked on the\r\n * proxied RestClient class (reference: ~/src/proxy.es6.js)\r\n *\r\n * @type Array\r\n */\r\n\r\nproperties = [];\r\n\r\n/**\r\n * Stores key/value pairs meant to be\r\n * serialized into querystring\r\n *\r\n * @type Object\r\n */\r\n\r\nquerystring = {};\r\n\r\n/**\r\n * GlobalFetch.fetch method initialization object\r\n * (reference: https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch#Parameters)\r\n *\r\n * @type Object\r\n */\r\n\r\nfetchConfiguration = {};\r\n\r\n/************************************/\r\n/* private methods                  */\r\n/************************************/\r\n\r\n /**\r\n  * Helps to configure the client by creating an initialization object suitable\r\n  * as an argument for the GlobalFetch.fetch method; will conveniently be turned into\r\n  * an higher-order function via ES7 decorator in the next releases\r\n  *  \r\n  * @method _httpMethod\r\n  * @param {Symbol} type Determines whether any contents should be sent\r\n  *                      as either querystring parameters or body payload\r\n  * @param {String} httpVerb HTTP method to be specified in the GlobalFetch.fetch\r\n  *                          initialization object (reference: ~/src/client.es6.js)\r\n  * @param {Object|\r\n  *         Blob|\r\n  *         BufferSource|\r\n  *         FormData|\r\n  *         URLSearchParams|\r\n  *         USVString} value Value to be either serialized to querystring or\r\n  *                          specified as body payload in the GlobalFetch.fetch\r\n  *                          initialization object, depending on the\r\n  *                          chosen HTTP method (reference: ~/src/client.es6.js)\r\n  *                                                                      \r\n  * @private\r\n  */\r\n\r\nconst _httpMethod = function _httpMethod(type, httpVerb, value){\r\n    \r\n    switch (type) {\r\n        \r\n        case QUERYSTRING_PARAMETERS:\r\n             fetchConfiguration = Object.assign({ method: httpVerb }, fetchConfiguration);\r\n             Object.assign(querystring, value);\r\n             break;\r\n            \r\n        case BODY_PAYLOAD:        \r\n             fetchConfiguration = Object.assign({ method: httpVerb },\r\n                                                (value) ? { body: value } : null);\r\n             break;\r\n        \r\n    }\r\n    \r\n};\r\n\r\n/************************************/\r\n/* class                            */\r\n/************************************/\r\n\r\n/**\r\n * Provides logic to store and parse configuration options, properties\r\n * and methods names invoked on the proxied RestClient class\r\n * (reference: ~/src/proxy.es6.js)\r\n *\r\n * @class Configuration\r\n * @constructor\r\n */\r\n\r\nexport default class Configuration {\r\n    \r\n    /************************************/\r\n    /* public methods                   */\r\n    /************************************/\r\n    \r\n    /**\r\n     * Gets an array of properties and methods names invoked on the\r\n     * proxied RestClient class (reference: ~/src/proxy.es6.js)\r\n     *\r\n     * @returns {Array}\r\n     */\r\n\r\n    get properties(){\r\n\r\n        return properties;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Gets an array of values resulting from the parsing of currently\r\n     * stored client settings suitable as an argument to the RestClient class\r\n     * fetch() method (reference: ~/src/client.es6.js)\r\n     *\r\n     * @returns {Array}\r\n     */\r\n\r\n    get computed(){\r\n\r\n        let settings,\r\n            configuration,\r\n            params,\r\n            route,\r\n            jsonPCallback;\r\n\r\n        settings = Object.assign({}, defaultSettings, userDefinedSettings);\r\n        configuration = Object.assign({ method: settings.method }, fetchConfiguration);\r\n        params = objectToQueryString(Object.assign({}, querystring, settings.params));\r\n        route = appendQueryStringToURL((settings.baseURI + properties.join('/')),\r\n                                        params);\r\n        jsonPCallback = settings.jsonp;\r\n        \r\n        this.reset();\r\n\r\n        return [route, configuration, jsonPCallback];\r\n \r\n    }\r\n    \r\n    /**\r\n     * Allows to override client defaults with user defined settings,\r\n     * persisting them across subsequent calls, unless explicitly\r\n     * either modified or reset\r\n     *  \r\n     * @method settings\r\n     * @param {Object} obj An object containing key/value pairs meant\r\n     *                     to override client default settings\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    settings(obj){\r\n         \r\n        Object.assign(userDefinedSettings, obj);\r\n        \r\n        return false;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Allows to specify a per-call initialization object suitable \r\n     * for the underlying call to the GlobalFetch.fetch method\r\n     * (reference: ~/src/client.es6.js)\r\n     *  \r\n     * @method init\r\n     * @param {Object} obj GlobalFetch.fetch initialization object\r\n     *                     (reference: https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch#Parameters)\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    init(obj){\r\n    \r\n        fetchConfiguration = obj;\r\n        \r\n        return false;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Restores client settings (routes, querystring parameters,\r\n     * GlobalFetch.fetch initialization object, user defined settings)\r\n     * to their defaults\r\n     * \r\n     * @method reset\r\n     * @param {Boolean} [settings] Optionally allows to also clear any user defined\r\n     *                             settings specified via settings() method\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    reset(settings){\r\n\r\n        properties.length = 0; \r\n        querystring = {};\r\n        fetchConfiguration = {};\r\n        \r\n        if (settings) {\r\n            \r\n            userDefinedSettings = Object.assign({}, defaultSettings);\r\n            \r\n        }\r\n        \r\n        return false;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via HTTP GET\r\n     * \r\n     * @method get\r\n     * @param {Object} [obj] Object whose key/value pairs are meant\r\n     *                       to be serialized into querystring; values\r\n     *                       can be either primitive types or function expressions\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n    \r\n    get(obj){\r\n        \r\n        _httpMethod(QUERYSTRING_PARAMETERS, 'get', obj);\r\n\r\n        return true;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via HTTP HEAD\r\n     * \r\n     * @method head\r\n     * @param {Object} [obj] Object whose key/value pairs are meant\r\n     *                       to be serialized into querystring; values\r\n     *                       can be either primitive types or function expressions\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n     \r\n    head(obj){\r\n\r\n        _httpMethod(QUERYSTRING_PARAMETERS, 'head', obj);\r\n\r\n        return true;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via JSONP technique\r\n     * \r\n     * @method jsonp\r\n     * @param {Object} [obj] Object whose key/value pairs are meant\r\n     *                       to be serialized into querystring; values\r\n     *                       can be either primitive types or function expressions\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n     \r\n    jsonp(obj){\r\n\r\n        _httpMethod(QUERYSTRING_PARAMETERS, 'jsonp', obj);\r\n\r\n        return true;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via HTTP POST\r\n     * \r\n     * @method post\r\n     * @param {Blob|\r\n     *         BufferSource|\r\n     *         FormData|\r\n     *         URLSearchParams|\r\n     *         USVString} [payload] Value meant to be specified as body payload\r\n     *                              in the underlying GlobalFetch.fetch implementation\r\n     *                              initialization object\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    post(payload){\r\n\r\n        _httpMethod(BODY_PAYLOAD, 'post', payload);\r\n\r\n        return true;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via HTTP PUT\r\n     * \r\n     * @method put\r\n     * @param {Blob|\r\n     *         BufferSource|\r\n     *         FormData|\r\n     *         URLSearchParams|\r\n     *         USVString} [payload] Value meant to be specified as body payload\r\n     *                              in the underlying GlobalFetch.fetch implementation\r\n     *                              initialization object\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    put(payload){\r\n\r\n        _httpMethod(BODY_PAYLOAD, 'put', payload);\r\n\r\n        return true;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via HTTP DELETE\r\n     * \r\n     * @method delete\r\n     * @param {Blob|\r\n     *         BufferSource|\r\n     *         FormData|\r\n     *         URLSearchParams|\r\n     *         USVString} [payload] Value meant to be specified as body payload\r\n     *                              in the underlying GlobalFetch.fetch implementation\r\n     *                              initialization object\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    delete(payload){\r\n\r\n        _httpMethod(BODY_PAYLOAD, 'delete', payload);\r\n\r\n        return true;\r\n\r\n    }\r\n    \r\n    /**\r\n     * Configures the client to fetch a resource via HTTP PATCH\r\n     * \r\n     * @method patch\r\n     * @param {Blob|\r\n     *         BufferSource|\r\n     *         FormData|\r\n     *         URLSearchParams|\r\n     *         USVString} [payload] Value meant to be specified as body payload\r\n     *                              in the underlying GlobalFetch.fetch implementation\r\n     *                              initialization object\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n\r\n    patch(payload){\r\n\r\n        _httpMethod(BODY_PAYLOAD, 'patch', payload);\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    /**\r\n     * Configures the client to fetch a resource via HTTP OPTIONS\r\n     * \r\n     * @method options\r\n     * @param {Blob|\r\n     *         BufferSource|\r\n     *         FormData|\r\n     *         URLSearchParams|\r\n     *         USVString} [payload] Value meant to be specified as body payload\r\n     *                              in the underlying GlobalFetch.fetch implementation\r\n     *                              initialization object\r\n     * @return {Boolean} Determines whether the method should be\r\n     *                   marked as HTTP-related\r\n     */\r\n     \r\n    options(payload){\r\n\r\n        _httpMethod(BODY_PAYLOAD, 'options', payload);\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n}\r\n","import { objectToQueryString,\r\n         appendQueryStringToURL,\r\n         prefixedTimestamp } from './helpers.es6.js';\r\n\r\n/************************************/\r\n/* private methods                  */\r\n/************************************/\r\n         \r\n/**\r\n * Fetches a remote JSON-encoded file via JSONP technique\r\n *  \r\n * @method _jsonpFetch\r\n * @for RestClient\r\n * @param {String} url A string containing the URL to which the request is sent\r\n * @param {Object} callback An object whose first key/value pair respectively contains\r\n *                          names of the JSONP callback querystring parameter and of its\r\n *                          related function meant to accept the JSON-encoded data as\r\n *                          an argument\r\n * @private\r\n * @return {Promise<any>}\r\n */\r\n         \r\nconst _jsonpFetch = function _jsonpFetch(url, callback){\r\n    \r\n    let callbackParamName,\r\n        callbackFunctionName,  \r\n        querystring,\r\n        scriptId,\r\n        scriptElement,\r\n        scriptSource;\r\n\r\n    callbackParamName = Object.keys(callback)[0];\r\n    callbackFunctionName = callback[callbackParamName];\r\n    querystring = objectToQueryString(callback);\r\n    scriptId = prefixedTimestamp();\r\n    scriptSource = appendQueryStringToURL(url, querystring);\r\n\r\n    return new Promise((resolve, reject) => {\r\n\r\n        scriptElement = document.createElement('script');\r\n        scriptElement.src = scriptSource;\r\n        scriptElement.id = scriptId;\r\n        scriptElement.addEventListener('error', reject);\r\n\r\n        window[callbackFunctionName] = function(data){\r\n\r\n            Reflect.deleteProperty(window[callbackFunctionName]);\r\n            scriptElement.parentNode.removeChild(scriptElement);\r\n            resolve(data);\r\n\r\n        };\r\n\r\n        (document.getElementsByTagName('head')[0] ||\r\n                document.body || document.documentElement).appendChild(scriptElement);\r\n\r\n    });\r\n\r\n};\r\n\r\n/**\r\n * Proxy target object (reference: ~/src/proxy.es6.js);\r\n * provides logic to fetch remote resources\r\n *  \r\n * @class RestClient\r\n * @static\r\n */\r\n\r\nexport default class RestClient {\r\n\r\n    /**\r\n     * Wraps the native GlobalFetch.fetch method providing\r\n     * additional support for cross-domain fetching of\r\n     * JSON-encoded resources via JSONP technique\r\n     *  \r\n     * @method fetch\r\n     * @param {String} url A string containing the URL to which the request is sent\r\n     * @param {Object} initObj GlobalFetch.fetch initialization object\r\n     *                         (reference: https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch#Parameters)\r\n     * @param {Object} callback An object whose first key/value pair respectively contains\r\n     *                          names of the JSONP callback querystring parameter and of its\r\n     *                          related function meant to accept the JSON-encoded data as\r\n     *                          an argument\r\n     * @return {Promise<Response>|Promise<any>}\r\n     * @static\r\n     */\r\n    \r\n    static fetch(url, initObj, callback){\r\n\r\n        if (initObj.method === 'jsonp') {\r\n\r\n            return _jsonpFetch(url, callback);\r\n\r\n        }\r\n\r\n        return fetch(url, initObj);\r\n\r\n    }\r\n\r\n}\r\n"],"sourceRoot":"/source/"}